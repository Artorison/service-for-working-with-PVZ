# Сервис для управления ПВЗ и приемкой товаров


Backend-сервис для сотрудников ПВЗ, который позволит вносить информацию по заказам в рамках приёмки товаров. Основные функции включают в себя регистрацию и авторизацию пользователей, создание ПВЗ, ведение приёмок и товаров.

---
## Технологии и библиотеки

- Go 1.24.2
- Веб-фреймворк: Echo v4
- База данных: PostgreSQL
- JWT авторизация login register
- Авторизация: github.com/golang-jwt/jwt/v5
- Валидация данных: github.com/asaskevich/govalidator
- Docker и Docker Compose для запуска приложения и БД
- Тестирование: testify, sqlmock, mockery
- Интеграционные тесты с поднятием тестовой базы данных

---
## Инструкция по запуску

Переименуйте файл .env.example в .env и укажите все необходимые переменные

Запуск:

```bash
make up
```
или 
```bash
docker compose up --build
```

Сервис работает на порту `8080`

Остановка и удаление приложения

```bash
make down
make clean
```

---

## Запуск тестов и покрытие кода

### Unit-тесты:

```bash
make test_unit
```

### Интеграционные тесты c поднятием тестовой БД


```bash
make test_integration
```
или
```bash
make test
```
для запуска всех тестов

### Генерация отчета о покрытии кода

```bash
make cover
```

после этого отчёт о покрытии кода будет доступен в файле `cover.html`.

---
## Основные Makefile команды 

В Makefile есть набор удобных команд:

`make up`: Запуск сервиса и БД.

`make down`: Остановка сервиса и БД.

`make migrate_init`: Инициализация базы данных (по умолчанию при запуске контейнера БД инициализируется сама).

`make migrate_drop`: Удаление схемы базы данных.

`make migrate_clear`: Очистка данных в БД.

`make test_unit`: Запуск unit-тестов.

`make test_integration`: Запуск интеграционных тестов.

`make cover`: Генерация отчёта покрытия тестами.

`make clean`: Удаление всех контейнеров и созданных файлов

---
